{"ast":null,"code":"import fetch from 'isomorphic-fetch';\nimport helpers from '../../helpers/searchHelpers';\nexport default (async (req, res) => {\n  try {\n    console.log(req);\n    var helper = new helpers();\n    const res1 = await fetch(\"https://api.mercadolibre.com/sites/MLA/search?q=\" + req.query.q);\n    const json1 = await res1.json();\n    var categoria = helper.getFirstCategories(json1);\n    const res2 = await fetch(\"https://api.mercadolibre.com/categories/\" + categoria);\n    const json2 = await res2.json();\n    var respuesta = helper.buildResponse(json1, json2);\n    res.status(200).json(respuesta);\n  } catch (error) {\n    res.status(500);\n  }\n});","map":{"version":3,"sources":["C:/Users/spike/Documents/MELI/MELI/pages/api/items.tsx"],"names":["fetch","helpers","req","res","console","log","helper","res1","query","q","json1","json","categoria","getFirstCategories","res2","json2","respuesta","buildResponse","status","error"],"mappings":"AAAA,OAAOA,KAAP,MAAmB,kBAAnB;AACA,OAAOC,OAAP,MAAoB,6BAApB;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,MAAI;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACA,QAAII,MAAM,GAAG,IAAIL,OAAJ,EAAb;AACA,UAAMM,IAAI,GAAG,MAAMP,KAAK,CAAC,qDAAqDE,GAAG,CAACM,KAAJ,CAAUC,CAAhE,CAAxB;AACA,UAAMC,KAAK,GAAG,MAAMH,IAAI,CAACI,IAAL,EAApB;AACA,QAAIC,SAAS,GAAGN,MAAM,CAACO,kBAAP,CAA0BH,KAA1B,CAAhB;AAEA,UAAMI,IAAI,GAAG,MAAMd,KAAK,CAAC,6CAA6CY,SAA9C,CAAxB;AACA,UAAMG,KAAK,GAAG,MAAMD,IAAI,CAACH,IAAL,EAApB;AAEA,QAAIK,SAAS,GAAIV,MAAM,CAACW,aAAP,CAAqBP,KAArB,EAA2BK,KAA3B,CAAjB;AACAZ,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBP,IAAhB,CAAqBK,SAArB;AACH,GAZD,CAYE,OAAOG,KAAP,EAAc;AACZhB,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX;AACH;AACJ,CAhBD","sourcesContent":["import fetch  from 'isomorphic-fetch';\r\nimport helpers from '../../helpers/searchHelpers';\r\n\r\nexport default async (req, res) => {\r\n    try {\r\n        console.log(req)\r\n        var helper = new helpers();\r\n        const res1 = await fetch(\"https://api.mercadolibre.com/sites/MLA/search?q=\" + req.query.q);\r\n        const json1 = await res1.json();\r\n        var categoria = helper.getFirstCategories(json1);\r\n\r\n        const res2 = await fetch(\"https://api.mercadolibre.com/categories/\" + categoria);\r\n        const json2 = await res2.json();\r\n        \r\n        var respuesta =  helper.buildResponse(json1,json2);\r\n        res.status(200).json(respuesta);\r\n    } catch (error) {\r\n        res.status(500);\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}