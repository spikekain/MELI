{"ast":null,"code":"import fetch from \"isomorphic-fetch\";\nimport helpers from \"../../helpers/searchHelpers\";\nexport default (async (req, res) => {\n  try {\n    var helper = new helpers();\n    const res1 = await fetch(\"https://api.mercadolibre.com/sites/MLA/search?q=\" + req.query.q);\n    const json1 = await res1.json();\n    var categoria = helper.getFirstCategories(json1);\n    const res2 = await fetch(\"https://api.mercadolibre.com/categories/\" + categoria);\n    const json2 = await res2.json();\n    res.status(200).json(helper.buildResponse(json1, json2));\n  } catch (error) {\n    console.log(error);\n    res.status(500).json();\n  }\n});","map":{"version":3,"sources":["C:/Users/spike/Documents/MELI/MELI/pages/api/items.tsx"],"names":["fetch","helpers","req","res","helper","res1","query","q","json1","json","categoria","getFirstCategories","res2","json2","status","buildResponse","error","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,kBAAlB;AACA,OAAOC,OAAP,MAAoB,6BAApB;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,MAAI;AACF,QAAIC,MAAM,GAAG,IAAIH,OAAJ,EAAb;AACA,UAAMI,IAAI,GAAG,MAAML,KAAK,CACtB,qDAAqDE,GAAG,CAACI,KAAJ,CAAUC,CADzC,CAAxB;AAGA,UAAMC,KAAK,GAAG,MAAMH,IAAI,CAACI,IAAL,EAApB;AACA,QAAIC,SAAS,GAAGN,MAAM,CAACO,kBAAP,CAA0BH,KAA1B,CAAhB;AAEA,UAAMI,IAAI,GAAG,MAAMZ,KAAK,CACtB,6CAA6CU,SADvB,CAAxB;AAGA,UAAMG,KAAK,GAAG,MAAMD,IAAI,CAACH,IAAL,EAApB;AAEAN,IAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBL,IAAhB,CAAqBL,MAAM,CAACW,aAAP,CAAqBP,KAArB,EAA4BK,KAA5B,CAArB;AACD,GAdD,CAcE,OAAOG,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAb,IAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBL,IAAhB;AACD;AACF,CAnBD","sourcesContent":["import fetch from \"isomorphic-fetch\";\r\nimport helpers from \"../../helpers/searchHelpers\";\r\n\r\nexport default async (req, res) => {\r\n  try {\r\n    var helper = new helpers();\r\n    const res1 = await fetch(\r\n      \"https://api.mercadolibre.com/sites/MLA/search?q=\" + req.query.q\r\n    );\r\n    const json1 = await res1.json();\r\n    var categoria = helper.getFirstCategories(json1);\r\n\r\n    const res2 = await fetch(\r\n      \"https://api.mercadolibre.com/categories/\" + categoria\r\n    );\r\n    const json2 = await res2.json();\r\n\r\n    res.status(200).json(helper.buildResponse(json1, json2));\r\n  } catch (error) {\r\n    console.log(error);\r\n    res.status(500).json();\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}