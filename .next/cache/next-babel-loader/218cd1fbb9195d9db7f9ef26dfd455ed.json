{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport \"../models/categorias\";\nimport \"../models/item\";\nimport \"./authorHelper\";\nimport getAuthor from \"./authorHelper\";\n\nclass SearchHelpers {\n  constructor() {\n    _defineProperty(this, \"getFirstCategories\", resMELI => {\n      try {\n        console.log(resMELI.available_filters.filter(itemF => {\n          itemF.id == \"category\";\n        }));\n\n        if (resMELI.filters.length > 0) {\n          return resMELI.filters.filter(itemF => {\n            itemF.id == \"category\";\n          })[0].values.id;\n        } else {\n          var categorias = this.orderRawCategories(resMELI.available_filters.filter(itemF => {\n            itemF.id == \"category\";\n          })[0].values);\n\n          for (var i = 0; i < categorias.length; i++) {\n            if (categorias[i].id != \"all\") {\n              return categorias[i].id;\n            }\n          }\n        }\n\n        return \"noCat\";\n      } catch (error) {\n        console.log(error);\n        return \"noCat\";\n      }\n    });\n\n    _defineProperty(this, \"orderRawCategories\", listCategorias => {\n      listCategorias.sort((a, b) => {\n        return b.results - a.results;\n      });\n      return listCategorias;\n    });\n\n    _defineProperty(this, \"getCategories\", categories => {\n      var res = [];\n      categories.path_from_root.forEach(element => {\n        res.push(element.name);\n      });\n      return res;\n    });\n\n    _defineProperty(this, \"buildResponse\", (resMELI, categories) => {\n      var resp = {\n        author: getAuthor(),\n        categories: this.getCategories(categories),\n        items: this.getItems(resMELI.results)\n      };\n      return resp;\n    });\n\n    _defineProperty(this, \"getItems\", results => {\n      var items = [];\n      var limit = 4;\n      if (results.length < 4) limit = results.length;\n\n      for (var i = 0; i < limit; i++) {\n        items.push({\n          id: results[i].id,\n          title: results[i].title,\n          picture: results[i].thumbnail,\n          condition: results[i].condition,\n          city: results[i].address.state_name,\n          free_shipping: results[i].shipping.free_shipping,\n          price: {\n            currency: results[i].currency_id,\n            amount: results[i].price,\n            decimals: 0\n          }\n        });\n      }\n\n      return items;\n    });\n  }\n\n}\n\nexport default SearchHelpers;","map":{"version":3,"sources":["C:/Users/spike/Documents/MELI/MELI/helpers/searchHelpers.tsx"],"names":["getAuthor","SearchHelpers","constructor","resMELI","console","log","available_filters","filter","itemF","id","filters","length","values","categorias","orderRawCategories","i","error","listCategorias","sort","a","b","results","categories","res","path_from_root","forEach","element","push","name","resp","author","getCategories","items","getItems","limit","title","picture","thumbnail","condition","city","address","state_name","free_shipping","shipping","price","currency","currency_id","amount","decimals"],"mappings":"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","sourcesContent":["import \"../models/categorias\";\r\nimport \"../models/item\";\r\nimport \"./authorHelper\";\r\nimport getAuthor from \"./authorHelper\";\r\n\r\nclass SearchHelpers {\r\n  constructor() {}\r\n  getFirstCategories = (resMELI: any): string => {\r\n\r\n    try {\r\n      console.log( resMELI.available_filters.filter((itemF:any)=>{\r\n        itemF.id == \"category\";\r\n      }));\r\n      \r\n      if (resMELI.filters.length > 0) {\r\n        return resMELI.filters.filter((itemF: any) => {\r\n          itemF.id == \"category\";\r\n        })[0].values.id;\r\n      } else {\r\n        var categorias = this.orderRawCategories(\r\n          resMELI.available_filters.filter((itemF:any)=>{\r\n            itemF.id == \"category\";\r\n          })[0].values\r\n        );\r\n        for (var i = 0; i < categorias.length; i++) {\r\n          if (categorias[i].id != \"all\") {\r\n            return categorias[i].id;\r\n          }\r\n        }\r\n      }\r\n\r\n      return \"noCat\";\r\n    } catch (error) {\r\n      console.log(error);\r\n      return \"noCat\";\r\n    }\r\n  };\r\n  orderRawCategories = (listCategorias: categorias[]): categorias[] => {\r\n    listCategorias.sort((a: categorias, b: categorias) => {\r\n      return b.results - a.results;\r\n    });\r\n    return listCategorias;\r\n  };\r\n  getCategories = (categories: any): string[] => {\r\n    var res: string[] = [];\r\n    categories.path_from_root.forEach((element: any) => {\r\n      res.push(element.name);\r\n    });\r\n\r\n    return res;\r\n  };\r\n  buildResponse = (resMELI: any, categories: any): searchModel => {\r\n    var resp = {\r\n      author: getAuthor(),\r\n      categories: this.getCategories(categories),\r\n      items: this.getItems(resMELI.results),\r\n    };\r\n    return resp;\r\n  };\r\n\r\n  getItems = (results: any[]): item[] => {\r\n    var items: item[] = [];\r\n    var limit = 4;\r\n    if (results.length < 4) limit = results.length;\r\n\r\n    for (var i = 0; i < limit; i++) {\r\n      items.push({\r\n        id: results[i].id,\r\n        title: results[i].title,\r\n        picture: results[i].thumbnail,\r\n        condition: results[i].condition,\r\n        city: results[i].address.state_name,\r\n        free_shipping: results[i].shipping.free_shipping,\r\n        price: {\r\n          currency: results[i].currency_id,\r\n          amount: results[i].price,\r\n          decimals: 0,\r\n        },\r\n      });\r\n    }\r\n    return items;\r\n  };\r\n}\r\nexport default SearchHelpers;\r\n"]},"metadata":{},"sourceType":"module"}